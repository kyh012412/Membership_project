<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="i">

	<!-- 상품 목록 조회 반환 map -->
	<resultMap type="vo.ItemVO" id="shop_list">
		<result column="i_name" property="i_name" jdbcType="VARCHAR"/>
	  	<result column="i_price" property="i_price" jdbcType="VARCHAR"/>
	  	<result column="i_photo_name" property="i_photo_name" jdbcType="VARCHAR"/>
	  	<result column="i_detail_photo_name" property="i_detail_photo_name" jdbcType="VARCHAR"/>
	</resultMap>
	
	<!-- 상품 업로드 -->
	<insert id="item_upload" parameterType="item">
		insert into item values (seq_item_idx.nextval,
								#{i_name},
								#{i_price},
								#{i_color},
								#{i_amount},
								#{i_photo_name},
								#{i_detail_photo_name}
								)
	</insert>
	
	<!-- 상품 목록 조회 -->
	<select id="item_list_select" resultMap="shop_list">
		SELECT * FROM item 
		WHERE ROWID IN (SELECT MAX(ROWID) FROM item GROUP BY I_NAME)
	</select>
	
	<!-- 선택한 상품 한개 조회 -->
	<select id="item_select_one" parameterType="int" resultType="item">
		select * from item where i_idx=#{i_idx}
	</select>
	
	<!-- 선택한 상품의 색상 조회 -->
	<select id="item_select_color" parameterType="String" resultType="String">
		select i_color from item where i_name=#{i_name}
	</select>
	
	<!-- 선택한 상품의 idx 조회 -->
	<select id="item_find_idx" parameterType="java.util.HashMap" resultType="int">
		select i_idx from item where i_name=#{i_name} and i_color=#{i_color}
	</select>
</mapper>
