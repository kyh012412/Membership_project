<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="pm">
	<select id="login_check" resultType="pmember"
		parameterType="String">
		select * from p_member where m_id=#{m_id}
	</select>

	<select id="id_check" resultType="int" parameterType="String">
		select
		count(*) from p_member where m_id=#{m_id}
	</select>

	<insert id="insert" parameterType="pmember">
		insert into p_member values(
			seq_member_idx.nextval,
			#{m_username},
			#{m_password},
			#{m_id},
			#{m_name},
			#{m_tel},
			#{m_email},
			#{m_photo_name},
			0, 
			0,
			sysdate,
			null,
			null,
			null,
			#{m_date_of_birth}
		)
		<!-- 시퀀스 추가 예정 -->
		<!-- db에 맞게 컬럼 수정필요  -->
	</insert>
	
	<select id="login_session_check" resultType="pmember" parameterType="int">
		select * from p_member where m_idx=#{m_idx}
	</select>
	
	<select id="select_one" resultType="pmember" parameterType="int">
		select * from p_member where m_idx=#{m_idx}
	</select>
	
	<select id="email_check" resultType="int" parameterType="String">
		select count(*) from p_member where m_email=#{m_email}
	</select>
	
	<update id="delete_update" parameterType="pmember">
		update p_member set m_id='del'||#{m_id} where m_idx=#{m_idx}
	</update>
	
	<!-- modify => update -->
	<update id="modify_id" parameterType="pmember">
		update p_member set m_ip=#{m_ip}
	</update>
	
	<update id="modify_password" parameterType="pmember">
		update p_member set m_password=#{m_password}
	</update>
	
	<update id="user_info_update" parameterType="pmember">
		update p_member set m_name=#{m_name},
							m_tel=#{m_tel},
							m_date_of_birth=#{m_date_of_birth},
							m_email=#{m_email}
							where m_idx=#{m_idx}
	</update>
	
	<update id="photo_upload" parameterType="pmember">
		update p_member set m_photo_name=#{m_photo_name} where m_idx=#{m_idx}
	</update>
	
	<update id="user_profile_update" parameterType="pmember">
		update p_member set m_username=#{m_username},
							m_photo_name=#{m_photo_name}
							where m_idx=#{m_idx}
	</update>
</mapper>


